{% extends "world/_page.html" %}

{% block content_title %}{{ _('World') }}{% endblock %}
{% block content_tagline %}{{ _('any fictional world at your fingertips') }}{% endblock %}
{% block world_active %} class="active"{% endblock %}

{% block sidebar %}{{super()}}
  {% if not product %}
  {% call(privileged) MACRO.AUTHORIZED(access_policy['world'].authorize('new')) %}
  <ul class="nav nav-pills nav-stacked">
    <li><a class="{{privileged}}" href="{{ url_for('world.WorldsView:get', publisher_=publisher.slug, id='post') }}"><span class="glyphicon glyphicon-plus-sign"></span> {{ _('New world') }}</a></li>
  </ul>
  {% endcall %}
  {% endif %}
{% endblock %}

{% block content %}
    <div class="row">
    {% for world in worlds %}
    <div class="col-md-5 col-xs-6 world_item">
        <h3><a href="{{ url_for('world.WorldsView:get', publisher_=publisher.slug, id=world.slug)}}">{{ world.title }}</a>
        <br><small>{{ world.description|markdown }}</small></h3>
        <hr>
        <dl class="dl-horizontal">
            <dt>{{ _('Publisher') }}</dt>
            <dd>{{ world.publisher|default(_('No data'), true) }}</dd>
            <dt>{{ _('Rule System') }}</dt>
            <dd>{{ world.rule_system|default(_('No data'), true) }}</dd>
            <dt>{{ _('Created date') }}</dt>
            <dd>{{ world.created_date.strftime('%Y-%m-%d') }}</dd>
        </dl>
    </div>
    {% if loop.index is divisibleby 2 %}</div><div class="row">{% endif %}
    {% else %}
    <div class="jumbotron text-center">
    <h2>{{_('Aeon is working on some worlds, please check back later!')}}</h2>
    </div>
    {% endfor %}
  </div>
  {% include "includes/pagination.html" %}
{% endblock %}