{% extends "world/_page.html" %}

{% block content_title %}{{ _('World') }}{% endblock %}
{% block content_tagline %}{{ _('any fictional world at your fingertips') }}{% endblock %}
{% block world_active %} class="active"{% endblock %}

{% block sidebar %}{{super()}}
  {% if not product %}
  {% call(privileged) MACRO.AUTHORIZED(access_policy['world'].authorize('new')) %}
  <ul class="nav nav-pills nav-stacked">
    <li><a class="{{privileged}}" href="{{ url_for('world.WorldsView:get', publisher_=publisher.slug, id='post') }}"><span class="glyphicon glyphicon-plus-sign"></span> {{ _('New world') }}</a></li>
  </ul>
  {% endcall %}
  {% endif %}
{% endblock %}

{% block content %}

   <div class="cards">
        {% for world in worlds %}
            <div class="card"
                    {%- if world.get_feature_image -%}
                 style="background: url({{ url_for('image_thumb', slug=world.get_feature_image.slug) }}) center top/cover;"
                    {%- endif -%}>
                <a class="card-cover gianticon" href="{{ url_for('world.WorldsView:get', publisher_=publisher.slug, id=world.slug)}}">
                    <svg class="fablr-icon fablr-icon-stretch">
                        <use xlink:href="#fablr-earth"></use>
                    </svg>
                </a>
                <div class="card-text">
                    <h3 class="card-title dobr">
                        <a href="{{ url_for('world.WorldsView:get', publisher_=publisher.slug, id=world.slug)}}">{{ world.title }}</a>
                    </h3>
                    <div class="card-description">
                        {{ world.description|markdown }}
                    </div>
                    <ul class="card-details">
                        <li class="product-type">{{ _('Publisher') }}: {{ world.publisher|default(_('No data'), true) }}</li>
                        <li class="product-type">{{ _('Rule System') }}: {{ world.rule_system|default(_('No data'), true) }}</li>
                        <li class="product-type">{{ _('Created date') }}: {{ world.created_date|dateformat(format='short') }}</li>
                    </ul>
                </div>
            </div>
        {% endfor %}
    </div>
  {% include "includes/pagination.html" %}
{% endblock %}