 {%- macro action_buttons(submit_title, cancel_title="Cancel", submit_class="primary") -%}
<div class="actions">
  <input type="submit" class="btn {{submit_class}}" value="{{submit_title}}">
  &nbsp;
  <button type="reset" class="btn">{{cancel_title}}</button>
</div>
{%- endmacro -%}

{%- macro FORM_FIELD2(field) -%}
  <dt>{{ field.label }}
  <dd>{{ field(**kwargs)|safe }}
  {% if field.errors %}
    <ul class=errors>
    {% for error in field.errors %}
      <li>{{ error }}</li>
    {% endfor %}
    </ul>
  {% endif %}
  </dd>
{%- endmacro -%}

{%- macro FORM_FIELD(field, controlclass="", labelclass="", groupclass="") -%}
  {% set fieldargs = {'class':'form-control '+controlclass} %}
  {% do fieldargs.update({'required':true}) if field.flags.required %}  
  {% do fieldargs.update(kwargs) if kwargs %}
  <div class="form-group{{ ' has-error has-feedback' if field.errors }}{{' '+groupclass if groupclass}}">
    {{ field.label(class="control-label "+labelclass) if field.label }}
    {{ field(**fieldargs) }}
    {%- if field.errors -%}
    <span class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
    {%- endif -%}
  </div>
{%- endmacro -%}

{%- macro FORM_FIELD_INLINE(field, controlclass="", labelclass="", groupclass="") -%}
  {% set fieldargs = {'class':'form-control '+controlclass, 'placeholder':field.label.text} %}
  {% do fieldargs.update({'required':true}) if field.flags.required %}  
  {% do fieldargs.update(kwargs) if kwargs %}
  <div class="form-group{{ ' has-error has-feedback' if field.errors }}{{' '+groupclass if groupclass}}">
    {{ field.label(class="sr-only control-label "+labelclass) if field.label }}
    {{ field(**fieldargs) }}
    {%- if field.errors -%}
    <span class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
    <span class="help-block">{{ field.errors|join(' ') }}</span>
    {%- endif -%}
  </div>
{%- endmacro -%}

{%- macro FORM_FIELD_COLS(field, labelcol, inputcol, controlclass="", labelclass="", groupclass="") -%}
  {% set fieldargs = {'class':'form-control '+controlclass} %}
  {% do fieldargs.update({'required':true}) if field.flags.required %}  
  {% do fieldargs.update(kwargs) if kwargs %}
  <div class="form-group{{ ' has-error has-feedback' if field.errors }}{{' '+groupclass if groupclass}}">
    {{ field.label(class="control-label "+labelclass+" "+labelcol) if field.label }}
    <div class="{{inputcol}}">
    {{ field(**fieldargs) }}
      {%- if field.errors -%}
      <span class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
      {%- endif -%}
    </div>
  </div>
{%- endmacro -%}

{%- macro AUTHORIZED(auth) -%}
  {% if auth %}
    {{ caller("privileged" if auth.is_privileged() else '') }}
  {% endif %}
{%- endmacro -%}



{%- macro IS_USER(user=none) -%}
  {% if g.user and (not user or g.user == user or g.user.admin) %}
     {{ caller() }}
  {% endif %}
{%- endmacro -%}

{%- macro IS_ADMIN() -%}
  {% if g.user and g.user.admin %}
     {{ caller() }}
  {% endif %}
{%- endmacro -%}

 {%- macro IS_ENABLED(feature) -%}
  {% if g.feature and g.feature[feature] %}
     {{ caller() }}
  {% endif %}
{%- endmacro -%}

{%- macro VISIBILITY(condition) -%}
  {%- if condition -%}<small title="{{_('Your access rights allow you to view this resource in this view')}}"><span class="glyphicon glyphicon-eye-close"></span>&nbsp;</small>{%- endif %}
{%- endmacro -%}

{%- macro LIST_CONTROLS() -%}
<form class="form-inline">
<div class="btn-toolbar">
<div class="btn-group">
<button type="button" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-th-large"></span></button>  
<button type="button" class="btn btn-default btn-sm active"><span class="glyphicon glyphicon-list-alt"></span></button>  

</div>

<div class="btn-group">
  {% if 'order_by' in request.args %}
  <a href="{{ url_for(request.endpoint, **request.view_args|without('order_by')) }}" class="btn btn-info btn-sm">Order By: {{request.args.get('order_by')}} &times;</a>  
  {% else %}
  <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Order By <span class="caret"></span></button>
  <ul class="dropdown-menu" role="menu">
      <li><a href="#">Order</a></li>
      <li><a href="#">User</a></li>
      <li><a href="#">Skapad</a></li>
      <li><a href="#">Uppdaterad</a></li>
  </ul>
  {% endif %}
</div>

<div class="btn-group">
  {% if 'per_page' in request.args %}
  <a href="{{ url_for(request.endpoint, **request.view_args|without('per_page')) }}" class="btn btn-info btn-sm">Per Page: {{request.args.get('per_page')}} &times;</a>  
  {% else %}
  <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Per Page: 10 <span class="caret"></span></button>
  {% set args_without_page = request.view_args|without('per_page', 'page') %}
  <ul class="dropdown-menu" role="menu">
      <li><a href="{{ url_for(request.endpoint, per_page=20, **args_without_page) }}">20</a></li>
      <li><a href="{{ url_for(request.endpoint, per_page=50, **args_without_page) }}">50</a></li>
      <li><a href="{{ url_for(request.endpoint, per_page=100, **args_without_page) }}">100</a></li>
      <li><a href="{{ url_for(request.endpoint, per_page='all', **args_without_page) }}">All</a></li>
  </ul>
  {% endif %}
</div>

<div class="btn-group">
<button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Filter <span class="caret"></span></button>
  <ul class="dropdown-menu" role="menu">
      <li><a href="#">Equals</a></li>
      <li><a href="#">Less than</a></li>
      <li><a href="#">Greater than</a></li>
      <li><a href="#">Not equal</a></li>
  </ul>
</div>

<div class="input-group input-group-sm">
  <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
  <input type="text" class="form-control" placeholder="Search">
</div>
</div>
</form>
{%- endmacro -%}
