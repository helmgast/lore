{% import 'includes/macros.html' as MACRO %}

{% if args.get('view', 'table') == 'card' %}
    <div class="cards">
        <div class="row">
            {% for user in users %}
                <div class="col-md-4 product">
                    {% if user.get_feature_image %}
                        <img class="product-image" src="{{ url_for('image_thumb', slug=user.get_feature_image.slug) }}">
                    {% endif %}
                    <div class="product-intro">
                        <h3>
                            <a href="{{ url_for('social.UsersView:get', id=user.identifier) }}">{{ user }}</a>
                        </h3>
                    </div>
                    <ul class="product-details">
                        <li class="product-type">{{ user.username }}</li>
                        <li class="product-type">{{ user.join_date.strftime('%Y-%m-%d %H:%M')}}</li>
                    </ul>
                </div>
                {% if loop.index is divisibleby 3 %}</div>
                    <div class="row">{% endif %}
            {% endfor %}
            </div>
    </div>
{% else %}
    <table class="table table-striped table-hover">
        <thead>
        <th>{{ MACRO.ORDER_BY_LINK(model, args, 'username') }}</th>
        <th>{{ MACRO.ORDER_BY_LINK(model, args, 'status') }}</th>
        <th>{{ MACRO.ORDER_BY_LINK(model, args, 'xp') }}</th>
        <th>{{ MACRO.ORDER_BY_LINK(model, args, 'location') }}</th>
        <th>{{ MACRO.ORDER_BY_LINK(model, args, 'join_date') }}</th>
        <th>{{ MACRO.ORDER_BY_LINK(model, args, 'last_login') }}</th>
        </thead>
        <tbody>
        {% for user in users %}
            <tr class="user-tablerow m_instance">
                <td><a href="{{ url_for('social.UsersView:get', id=user.identifier()) }}">
                    <img class="avatar" src="{{ user.gravatar_url() }}"/>
                    <strong class="message_name">{{ user }}</strong>
                </a></td>
                <td>{{ user.get_field_display('status') }}</td>
                <td>{{ user.xp|default }}</td>
                <td>{{ user.location|default }}</td>
                <td class="small">{{ user.join_date.strftime('%Y-%m-%d %H:%M') if user.join_date}}</td>
                <td class="small">{{ user.last_login.strftime('%Y-%m-%d %H:%M') if user.last_login}}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}